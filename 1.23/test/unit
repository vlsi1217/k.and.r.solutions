#!/usr/bin/env roundup

source helpers

describe "comment stripper"

it_should_strip_a_c_style_comment() {
  echo "a/* strip */b" | 1.23 | tee /dev/stderr | grep ab
}

it_should_ignore_double_slashes() {
  echo "// retain" | 1.23 | tee /dev/stderr | grep "\/\/ retain"
}

it_should_handle_quoted_strings_properly() {
  echo "\"/* retain */b\"" | 1.23 | tee /dev/stderr | grep "retain"
}

it_should_handle_character_constants_properly() {
  echo "'/* retain */b'" | 1.23 | tee /dev/stderr | grep "retain"
}

it_should_handle_character_constants_properly() {
  echo "'/* retain */b'" | 1.23 | tee /dev/stderr | grep "retain"
}

it_should_ignore_incorrectly_opened_comment() {
  echo "/ * retain */" | 1.23 | tee /dev/stderr | grep "retain"
}

it_should_ignore_incorrectly_closed_comment() {
  echo "/* comment * / strip */" | 1.23 | tee /dev/stderr | grep -v "strip"
}

